generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model field_options {
  id            Int            @id @default(autoincrement())
  field_id      Int?
  label         String         @db.VarChar(100)
  value         String         @db.VarChar(100)
  created_at    DateTime?      @default(now()) @db.Timestamptz(6)
  survey_fields survey_fields? @relation(fields: [field_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model submission_answers {
  id            Int            @id @default(autoincrement())
  submission_id Int?
  field_id      Int?
  value         String
  survey_fields survey_fields? @relation(fields: [field_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  submissions   submissions?   @relation(fields: [submission_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model submissions {
  id                 Int                  @id @default(autoincrement())
  survey_id          Int?
  user_id            Int?
  submitted_at       DateTime?            @default(now()) @db.Timestamptz(6)
  submission_answers submission_answers[]
  surveys            surveys?             @relation(fields: [survey_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users              users?               @relation(fields: [user_id], references: [id], onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model survey_fields {
  id                 Int                  @id @default(autoincrement())
  survey_id          Int?
  label              String               @db.VarChar(150)
  field_type         String               @db.VarChar(50)
  is_required        Boolean?             @default(false)
  order_index        Int?                 @default(0)
  created_at         DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?            @default(now()) @db.Timestamptz(6)
  field_options      field_options[]
  submission_answers submission_answers[]
  surveys            surveys?             @relation(fields: [survey_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model surveys {
  id            Int             @id @default(autoincrement())
  title         String          @db.VarChar(200)
  description   String?
  created_by    Int?
  created_at    DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?       @default(now()) @db.Timestamptz(6)
  submissions   submissions[]
  survey_fields survey_fields[]
  users         users?          @relation(fields: [created_by], references: [id], onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model users {
  id          Int           @id
  created_at  DateTime?     @default(now()) @db.Timestamptz(6)
  name        String        @db.VarChar(100)
  email       String        @unique @db.VarChar(150)
  role        String        @db.VarChar(50)
  password    String        @db.VarChar(255)
  status      Boolean?      @default(true)
  updated_at  DateTime?     @default(now()) @db.Timestamptz(6)
  submissions submissions[]
  surveys     surveys[]
}
